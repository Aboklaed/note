<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¨Ø§Ø­Ø« Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Ø¨Ø§Ø­Ø« Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨<span>Ø¨Ø±Ù…Ø¬Ø© Ø­Ø³ÙŠÙ† Ø§Ù„Ø¹Ø±ÙŠØ§Ù†ÙŠ</span></h1>
    <div class="search-box">
      <input type="text" class="search-bar" id="inputBox" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù‚Ø§Ø·Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù„Ù‰ YouTube">
      <button class="search-btn" onclick="search()">ğŸ”</button>
    </div>
    <div id="player-container">
      <div id="player"></div>
    </div>
    <div id="videosResults"></div>
  </div>

  <!-- ØªØ¶Ù…ÙŠÙ† Ù…ÙƒØªØ¨Ø© YouTube Player API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // JavaScript Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ù†ØªØ§Ø¦Ø¬ YouTube Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… API

    // ØªØ¹Ø±ÙŠÙ Ù…ØªØºÙŠØ± Ø¹Ø§Ù„Ù…ÙŠ Ù„Ù„Ù…Ø´ØºÙ„
    let player;

    // Ø¯Ø§Ù„Ø© Ù„Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ù…Ø¶Ù…Ù†
    function playVideo(videoId) {
      if (player) {
        player.loadVideoById(videoId);
      } else {
        player = new YT.Player('player', {
          height: '180', // Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ø´ØºÙ„ Ù„ÙŠÙƒÙˆÙ† Ø£ØµØºØ±
          width: '320', // Ø§Ù†Ø®ÙØ§Ø¶ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´ØºÙ„ Ù„ÙŠÙƒÙˆÙ† Ø£ØµØºØ±
          videoId: videoId,
          events: {
            'onReady': onPlayerReady
          }
        });
      }
      // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Ø¯Ø§Ù„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø´ØºÙ„ Ø¬Ø§Ù‡Ø²Ù‹Ø§
    function onPlayerReady(event) {
      event.target.playVideo();
    }

    // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¹Ù„Ù‰ YouTube
    async function search() {
      try {
        const input = document.getElementById('inputBox').value.trim();
        if (input === '') {
          alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ØµØ·Ù„Ø­ Ø¨Ø­Ø« ØµØ§Ù„Ø­.');
          return;
        }

        const apiKey = 'AIzaSyA266SPutTfCO63sLArqnx8Xi-UR51PSus'; // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¨Ù…ÙØªØ§Ø­ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ

        const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(input)}&maxResults=25&key=${apiKey}`);
        const data = await response.json();

        const videosResults = document.getElementById('videosResults');
        videosResults.innerHTML = '';

        data.items.forEach(item => {
          if (item.id.kind === 'youtube#video') {
            const videoId = item.id.videoId;
            const title = item.snippet.title;
            const channelTitle = item.snippet.channelTitle;
            const thumbnailUrl = item.snippet.thumbnails.medium.url;

            const videoItem = document.createElement('div');
            videoItem.classList.add('video-item');

            const thumbnailImg = document.createElement('img');
            thumbnailImg.classList.add('video-thumbnail');
            thumbnailImg.src = thumbnailUrl;
            thumbnailImg.alt = title;
            // Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© ØªØ¨Ø¯Ø£ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
            thumbnailImg.addEventListener('click', function() {
              playVideo(videoId);
            });

            // Ø§Ø³ØªØ®Ø¯Ø§Ù… <span> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <a> Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            const titleElem = document.createElement('span');
            titleElem.classList.add('video-title');
            titleElem.textContent = title;
            titleElem.addEventListener('click', function() {
              playVideo(videoId);
            });

            const channelElem = document.createElement('p');
            channelElem.classList.add('channel-name');
            channelElem.textContent = channelTitle;

            const downloadBtn = document.createElement('a');
            downloadBtn.classList.add('download-button');
            downloadBtn.textContent = 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ';
            const downloadUrl = `https://www.ssyoutube.com/watch?v=${videoId}`;
            downloadBtn.href = downloadUrl;
            downloadBtn.addEventListener('click', function(event) {
              event.preventDefault();
              navigator.clipboard.writeText(downloadUrl).then(function() {
                window.location.href = downloadUrl;
              }, function(err) {
                console.error('ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·:', err);
              });
            });

            // Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ø£ÙƒÙ…Ù„Ù‡ ÙŠØ¨Ø¯Ø£ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
            videoItem.addEventListener('click', function() {
              playVideo(videoId);
            });

            videoItem.appendChild(thumbnailImg);
            videoItem.appendChild(titleElem); // Ø§Ø³ØªØ®Ø¯Ø§Ù… <span> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <a>
            videoItem.appendChild(channelElem);
            videoItem.appendChild(downloadBtn);

            videosResults.appendChild(videoItem);
          }
        });
      } catch (error) {
        console.error('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§.');
      }
    }

    // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« keydown Ù„Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
    document.getElementById('inputBox').addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        search();
        event.target.blur(); // Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ø­Ø«
      }
    });

  </script>
</body>
</html>
